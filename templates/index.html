
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Capstone</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<style>
body{background:#f8f9fa;}
.form-box{max-width:400px;margin:60px auto;}
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container">
    <a class="navbar-brand" href="#">Navbar</a>

    <ul class="navbar-nav me-auto">
      <li class="nav-item"><a class="nav-link active" href="#">Home</a></li>
      <li class="nav-item"><a class="nav-link" href="#">Link</a></li>
    </ul>

    <!-- Search with Suggestions -->
    <form class="d-flex" onsubmit="searchWiki(event)">
  <input id="searchInput" class="form-control me-2" type="search" placeholder="Search anything...">
  <button class="btn btn-outline-success" type="submit">Search</button>
</form>

  </div>
</nav>

<!-- Search Result -->
<div class="container mt-4">
  <div id="results"></div>
</div>

<!-- Login Form -->
<div class="container">
  <div class="card shadow form-box">
    <div class="card-body">

      <div class="mb-3">
        <label class="form-label">Email address</label>
        <input type="email" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Password</label>
        <div class="input-group">
          <input type="password" class="form-control" id="pwd">
          <span class="input-group-text">
            <i class="bi bi-eye" id="togglePwd" style="cursor:pointer;"></i>
          </span>
        </div>
      </div>

      <button class="btn btn-primary w-100">Submit</button>

    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
async function searchWiki(e){
  e.preventDefault();

  const query = document.getElementById("searchInput").value.trim();
  if(!query) return;

  document.getElementById("results").innerHTML = "Loading...";

  try{
    // Step 1: search list
    const searchRes = await fetch(
      `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${query}&format=json&origin=*`
    );
    const searchData = await searchRes.json();

    let html = "";

    // Top 5 results
    for(const item of searchData.query.search.slice(0,5)){

      // Step 2: get page details + image
      const pageRes = await fetch(
        `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(item.title)}`
      );
      const pageData = await pageRes.json();

      html += `
      <div class="card mb-3 p-3">
        <div class="row g-3">
          <div class="col-md-3">
            ${pageData.thumbnail ? `<img src="${pageData.thumbnail.source}" class="img-fluid rounded">` : ``}
          </div>
          <div class="col-md-9">
            <h5>${pageData.title}</h5>
            <p>${pageData.extract || ""}</p>
            <a href="${pageData.content_urls?.desktop?.page}" target="_blank">Read more</a>
          </div>
        </div>
      </div>
      `;
    }

    if(!html) html = "No results found";

    document.getElementById("results").innerHTML = html;

  }catch(err){
    document.getElementById("results").innerHTML = "Error loading results";
  }
}
</script>


</body>
</html>
